# Generated by Django 6.0.1 on 2026-01-17 11:38

import django.db.models.deletion
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ("anagrafica", "0001_initial"),
        ("automezzi", "0001_initial"),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.AddField(
            model_name="allegatomanutenzione",
            name="caricato_da",
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.SET_NULL,
                to=settings.AUTH_USER_MODEL,
            ),
        ),
        migrations.AddField(
            model_name="automezzo",
            name="assegnato_a",
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.SET_NULL,
                related_name="automezzi_assegnati",
                to=settings.AUTH_USER_MODEL,
            ),
        ),
        migrations.AddField(
            model_name="categoriaspesa",
            name="categoria_padre",
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.CASCADE,
                to="automezzi.categoriaspesa",
            ),
        ),
        migrations.AddField(
            model_name="controlloautomezzo",
            name="automezzo",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="controlli",
                to="automezzi.automezzo",
            ),
        ),
        migrations.AddField(
            model_name="controlloautomezzo",
            name="controllore",
            field=models.ForeignKey(
                null=True,
                on_delete=django.db.models.deletion.SET_NULL,
                to=settings.AUTH_USER_MODEL,
            ),
        ),
        migrations.AddField(
            model_name="eventoautomezzo",
            name="automezzo",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="eventi",
                to="automezzi.automezzo",
            ),
        ),
        migrations.AddField(
            model_name="eventoautomezzo",
            name="dipendente_coinvolto",
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.SET_NULL,
                related_name="eventi_coinvolto",
                to=settings.AUTH_USER_MODEL,
            ),
        ),
        migrations.AddField(
            model_name="interventomanutenzione",
            name="automezzo",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="interventi_manutenzione",
                to="automezzi.automezzo",
            ),
        ),
        migrations.AddField(
            model_name="interventomanutenzione",
            name="responsabile_tecnico",
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.SET_NULL,
                related_name="interventi_responsabile",
                to=settings.AUTH_USER_MODEL,
            ),
        ),
        migrations.AddField(
            model_name="manutenzione",
            name="automezzo",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="manutenzioni",
                to="automezzi.automezzo",
            ),
        ),
        migrations.AddField(
            model_name="manutenzione",
            name="fornitore",
            field=models.ForeignKey(
                blank=True,
                help_text="Fornitore/Officina che esegue la manutenzione",
                null=True,
                on_delete=django.db.models.deletion.SET_NULL,
                to="anagrafica.fornitore",
            ),
        ),
        migrations.AddField(
            model_name="manutenzione",
            name="responsabile",
            field=models.ForeignKey(
                blank=True,
                help_text="Responsabile dell'esecuzione della manutenzione",
                null=True,
                on_delete=django.db.models.deletion.SET_NULL,
                related_name="manutenzioni_responsabile",
                to=settings.AUTH_USER_MODEL,
            ),
        ),
        migrations.AddField(
            model_name="manutenzione",
            name="seguito_da",
            field=models.ForeignKey(
                blank=True,
                help_text="Utente che ha aperto e segue la pratica di manutenzione",
                null=True,
                on_delete=django.db.models.deletion.SET_NULL,
                related_name="manutenzioni_seguite",
                to=settings.AUTH_USER_MODEL,
            ),
        ),
        migrations.AddField(
            model_name="interventomanutenzione",
            name="manutenzione_base",
            field=models.OneToOneField(
                blank=True,
                help_text="Collegamento a record manutenzione base esistente",
                null=True,
                on_delete=django.db.models.deletion.CASCADE,
                to="automezzi.manutenzione",
            ),
        ),
        migrations.AddField(
            model_name="allegatomanutenzione",
            name="manutenzione",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="allegati_aggiuntivi",
                to="automezzi.manutenzione",
            ),
        ),
        migrations.AddField(
            model_name="ricambiousato",
            name="intervento",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="ricambi_usati",
                to="automezzi.interventomanutenzione",
            ),
        ),
        migrations.AddField(
            model_name="ricambiousato",
            name="ricambio",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE, to="automezzi.ricambio"
            ),
        ),
        migrations.AddField(
            model_name="rifornimento",
            name="automezzo",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="rifornimenti",
                to="automezzi.automezzo",
            ),
        ),
        migrations.AddField(
            model_name="spesaviaggio",
            name="automezzo",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="spese_viaggio",
                to="automezzi.automezzo",
            ),
        ),
        migrations.AddField(
            model_name="spesaviaggio",
            name="categoria_spesa",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                to="automezzi.categoriaspesa",
            ),
        ),
        migrations.AddField(
            model_name="spesaviaggio",
            name="dipendente",
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.SET_NULL,
                to=settings.AUTH_USER_MODEL,
            ),
        ),
        migrations.AddField(
            model_name="statisticheconsumo",
            name="automezzo",
            field=models.OneToOneField(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="statistiche_consumo",
                to="automezzi.automezzo",
            ),
        ),
        migrations.AddField(
            model_name="statistichecosto",
            name="automezzo",
            field=models.OneToOneField(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="statistiche_costo",
                to="automezzi.automezzo",
            ),
        ),
        migrations.AddField(
            model_name="tipologiaintervento",
            name="categoria_spesa",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                to="automezzi.categoriaspesa",
            ),
        ),
        migrations.AddField(
            model_name="interventomanutenzione",
            name="tipologia",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                to="automezzi.tipologiaintervento",
            ),
        ),
        migrations.AlterUniqueTogether(
            name="statistichecosto",
            unique_together={("automezzo", "anno", "trimestre")},
        ),
    ]
