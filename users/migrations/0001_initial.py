# Generated by Django 6.0.1 on 2026-01-17 11:38

import django.contrib.auth.models
import django.contrib.auth.validators
import django.db.models.deletion
import django.utils.timezone
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ("auth", "0012_alter_user_first_name_max_length"),
    ]

    operations = [
        migrations.CreateModel(
            name="User",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                ("password", models.CharField(max_length=128, verbose_name="password")),
                (
                    "last_login",
                    models.DateTimeField(
                        blank=True, null=True, verbose_name="last login"
                    ),
                ),
                (
                    "is_superuser",
                    models.BooleanField(
                        default=False,
                        help_text="Designates that this user has all permissions without explicitly assigning them.",
                        verbose_name="superuser status",
                    ),
                ),
                (
                    "username",
                    models.CharField(
                        error_messages={
                            "unique": "A user with that username already exists."
                        },
                        help_text="Required. 150 characters or fewer. Letters, digits and @/./+/-/_ only.",
                        max_length=150,
                        unique=True,
                        validators=[
                            django.contrib.auth.validators.UnicodeUsernameValidator()
                        ],
                        verbose_name="username",
                    ),
                ),
                (
                    "first_name",
                    models.CharField(
                        blank=True, max_length=150, verbose_name="first name"
                    ),
                ),
                (
                    "last_name",
                    models.CharField(
                        blank=True, max_length=150, verbose_name="last name"
                    ),
                ),
                (
                    "email",
                    models.EmailField(
                        blank=True, max_length=254, verbose_name="email address"
                    ),
                ),
                (
                    "is_staff",
                    models.BooleanField(
                        default=False,
                        help_text="Designates whether the user can log into this admin site.",
                        verbose_name="staff status",
                    ),
                ),
                (
                    "is_active",
                    models.BooleanField(
                        default=True,
                        help_text="Designates whether this user should be treated as active. Unselect this instead of deleting accounts.",
                        verbose_name="active",
                    ),
                ),
                (
                    "date_joined",
                    models.DateTimeField(
                        default=django.utils.timezone.now, verbose_name="date joined"
                    ),
                ),
                (
                    "created_at",
                    models.DateTimeField(
                        auto_now_add=True, verbose_name="Data creazione"
                    ),
                ),
                (
                    "updated_at",
                    models.DateTimeField(auto_now=True, verbose_name="Data modifica"),
                ),
                (
                    "deleted_at",
                    models.DateTimeField(
                        blank=True, null=True, verbose_name="Data cancellazione"
                    ),
                ),
                (
                    "codice_dipendente",
                    models.CharField(
                        help_text="Codice numerico 3 cifre (es. 001, 002, 156)",
                        max_length=3,
                        unique=True,
                        verbose_name="Codice Dipendente",
                    ),
                ),
                (
                    "data_nascita",
                    models.DateField(
                        blank=True, null=True, verbose_name="Data di nascita"
                    ),
                ),
                (
                    "luogo_nascita",
                    models.CharField(
                        blank=True, max_length=100, verbose_name="Luogo di nascita"
                    ),
                ),
                (
                    "codice_fiscale",
                    models.CharField(
                        help_text="Codice fiscale italiano (16 caratteri)",
                        max_length=16,
                        unique=True,
                        verbose_name="Codice Fiscale",
                    ),
                ),
                (
                    "carta_d_identita",
                    models.CharField(
                        blank=True,
                        help_text="Numero carta d'identità",
                        max_length=200,
                        verbose_name="Carta d'Identità",
                    ),
                ),
                (
                    "data_scadenza_ci",
                    models.DateField(
                        blank=True, null=True, verbose_name="Scadenza Carta d'Identità"
                    ),
                ),
                (
                    "patente_di_guida",
                    models.CharField(
                        blank=True,
                        help_text="Numero patente",
                        max_length=200,
                        verbose_name="Patente di Guida",
                    ),
                ),
                (
                    "data_scadenza_patente",
                    models.DateField(
                        blank=True, null=True, verbose_name="Scadenza Patente"
                    ),
                ),
                (
                    "categorie_patente",
                    models.CharField(
                        blank=True,
                        help_text="Es. B, C, D",
                        max_length=20,
                        verbose_name="Categorie Patente",
                    ),
                ),
                (
                    "foto_carta_identita",
                    models.ImageField(
                        blank=True,
                        null=True,
                        upload_to="users/documenti/carta_identita/%Y/%m/",
                        verbose_name="Foto Carta d'Identità",
                    ),
                ),
                (
                    "foto_codice_fiscale",
                    models.ImageField(
                        blank=True,
                        null=True,
                        upload_to="users/documenti/codice_fiscale/%Y/%m/",
                        verbose_name="Foto Codice Fiscale",
                    ),
                ),
                (
                    "foto_patente",
                    models.ImageField(
                        blank=True,
                        null=True,
                        upload_to="users/documenti/patente/%Y/%m/",
                        verbose_name="Foto Patente",
                    ),
                ),
                (
                    "telefono",
                    models.CharField(
                        blank=True, max_length=20, verbose_name="Telefono"
                    ),
                ),
                (
                    "telefono_emergenza",
                    models.CharField(
                        blank=True, max_length=20, verbose_name="Telefono emergenza"
                    ),
                ),
                (
                    "indirizzo",
                    models.CharField(
                        blank=True, max_length=200, verbose_name="Indirizzo"
                    ),
                ),
                (
                    "citta",
                    models.CharField(blank=True, max_length=100, verbose_name="Città"),
                ),
                ("cap", models.CharField(blank=True, max_length=5, verbose_name="CAP")),
                (
                    "provincia",
                    models.CharField(
                        blank=True, max_length=2, verbose_name="Provincia"
                    ),
                ),
                (
                    "data_assunzione",
                    models.DateField(
                        blank=True, null=True, verbose_name="Data assunzione"
                    ),
                ),
                (
                    "data_cessazione",
                    models.DateField(
                        blank=True, null=True, verbose_name="Data cessazione"
                    ),
                ),
                (
                    "qualifica",
                    models.CharField(
                        blank=True, max_length=100, verbose_name="Qualifica"
                    ),
                ),
                (
                    "reparto",
                    models.CharField(
                        blank=True, max_length=100, verbose_name="Reparto"
                    ),
                ),
                (
                    "posizione_inail",
                    models.CharField(
                        blank=True,
                        help_text="Codice posizione assicurativa INAIL",
                        max_length=200,
                        verbose_name="Posizione INAIL",
                    ),
                ),
                (
                    "posizione_inps",
                    models.CharField(
                        blank=True,
                        help_text="Codice posizione contributiva INPS",
                        max_length=200,
                        verbose_name="Posizione INPS",
                    ),
                ),
                (
                    "stato",
                    models.CharField(
                        choices=[
                            ("attivo", "Attivo"),
                            ("sospeso", "Sospeso"),
                            ("cessato", "Cessato"),
                            ("in_prova", "In Prova"),
                        ],
                        default="in_prova",
                        max_length=20,
                        verbose_name="Stato",
                    ),
                ),
                (
                    "foto_profilo",
                    models.ImageField(
                        blank=True,
                        null=True,
                        upload_to="users/profili/%Y/%m/",
                        verbose_name="Foto profilo",
                    ),
                ),
                (
                    "giorni_ferie_anno",
                    models.PositiveIntegerField(
                        default=26, verbose_name="Giorni ferie annuali"
                    ),
                ),
                (
                    "giorni_ferie_residui",
                    models.PositiveIntegerField(
                        default=26, verbose_name="Giorni ferie residui"
                    ),
                ),
                (
                    "ore_permesso_residue",
                    models.DecimalField(
                        decimal_places=2,
                        default=0,
                        max_digits=5,
                        verbose_name="Ore permesso residue",
                    ),
                ),
                (
                    "note",
                    models.TextField(
                        blank=True,
                        help_text="Note generali sul dipendente",
                        verbose_name="Note",
                    ),
                ),
                (
                    "note_interne",
                    models.TextField(
                        blank=True,
                        help_text="Note riservate agli amministratori",
                        verbose_name="Note interne",
                    ),
                ),
                (
                    "groups",
                    models.ManyToManyField(
                        blank=True,
                        help_text="The groups this user belongs to. A user will get all permissions granted to each of their groups.",
                        related_name="user_set",
                        related_query_name="user",
                        to="auth.group",
                        verbose_name="groups",
                    ),
                ),
                (
                    "user_permissions",
                    models.ManyToManyField(
                        blank=True,
                        help_text="Specific permissions for this user.",
                        related_name="user_set",
                        related_query_name="user",
                        to="auth.permission",
                        verbose_name="user permissions",
                    ),
                ),
            ],
            options={
                "verbose_name": "User",
                "verbose_name_plural": "Users",
                "db_table": "users_user",
                "ordering": ["codice_dipendente"],
                "permissions": [
                    ("gestione_completa_users", "Può gestire completamente gli users"),
                    (
                        "visualizza_dashboard_admin",
                        "Può visualizzare dashboard amministratore",
                    ),
                    ("approva_ferie", "Può approvare richieste ferie"),
                    ("approva_permessi", "Può approvare richieste permessi"),
                    ("emetti_lettera_richiamo", "Può emettere lettere di richiamo"),
                    ("visualizza_report_presenze", "Può visualizzare report presenze"),
                ],
            },
            managers=[
                ("objects", django.contrib.auth.models.UserManager()),
            ],
        ),
        migrations.CreateModel(
            name="GiornataLavorativa",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "created_at",
                    models.DateTimeField(
                        auto_now_add=True, verbose_name="Data creazione"
                    ),
                ),
                (
                    "updated_at",
                    models.DateTimeField(auto_now=True, verbose_name="Data modifica"),
                ),
                ("data", models.DateField(verbose_name="Data")),
                (
                    "ore_mattina",
                    models.DecimalField(
                        decimal_places=2,
                        default=0,
                        max_digits=4,
                        verbose_name="Ore Mattina",
                    ),
                ),
                (
                    "ore_pomeriggio",
                    models.DecimalField(
                        decimal_places=2,
                        default=0,
                        max_digits=4,
                        verbose_name="Ore Pomeriggio",
                    ),
                ),
                (
                    "ore_notte",
                    models.DecimalField(
                        decimal_places=2,
                        default=0,
                        max_digits=4,
                        verbose_name="Ore Notte",
                    ),
                ),
                (
                    "ore_totali",
                    models.DecimalField(
                        decimal_places=2,
                        default=0,
                        max_digits=5,
                        verbose_name="Ore Totali",
                    ),
                ),
                (
                    "ore_straordinarie",
                    models.DecimalField(
                        decimal_places=2,
                        default=0,
                        max_digits=5,
                        verbose_name="Ore Straordinarie",
                    ),
                ),
                (
                    "conclusa",
                    models.BooleanField(
                        default=False, verbose_name="Giornata conclusa"
                    ),
                ),
                ("note", models.TextField(blank=True, verbose_name="Note")),
                (
                    "user",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="giornate",
                        to=settings.AUTH_USER_MODEL,
                        verbose_name="User",
                    ),
                ),
            ],
            options={
                "verbose_name": "Giornata Lavorativa",
                "verbose_name_plural": "Giornate Lavorative",
                "db_table": "users_giornata_lavorativa",
                "ordering": ["-data"],
            },
        ),
        migrations.CreateModel(
            name="LetteraRichiamo",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "created_at",
                    models.DateTimeField(
                        auto_now_add=True, verbose_name="Data creazione"
                    ),
                ),
                (
                    "updated_at",
                    models.DateTimeField(auto_now=True, verbose_name="Data modifica"),
                ),
                (
                    "tipo",
                    models.CharField(
                        choices=[
                            ("verbale", "Richiamo Verbale"),
                            ("scritto", "Richiamo Scritto"),
                            ("sospensione", "Sospensione"),
                        ],
                        max_length=20,
                        verbose_name="Tipo",
                    ),
                ),
                (
                    "data_emissione",
                    models.DateField(auto_now_add=True, verbose_name="Data emissione"),
                ),
                ("motivo", models.TextField(verbose_name="Motivo")),
                (
                    "descrizione",
                    models.TextField(verbose_name="Descrizione dettagliata"),
                ),
                (
                    "giorni_sospensione",
                    models.PositiveIntegerField(
                        blank=True, null=True, verbose_name="Giorni sospensione"
                    ),
                ),
                (
                    "data_inizio_sospensione",
                    models.DateField(
                        blank=True, null=True, verbose_name="Data inizio sospensione"
                    ),
                ),
                (
                    "data_fine_sospensione",
                    models.DateField(
                        blank=True, null=True, verbose_name="Data fine sospensione"
                    ),
                ),
                (
                    "documento_pdf",
                    models.FileField(
                        blank=True,
                        null=True,
                        upload_to="users/lettere_richiamo/%Y/%m/",
                        verbose_name="Documento PDF",
                    ),
                ),
                (
                    "user_ha_letto",
                    models.BooleanField(default=False, verbose_name="User ha letto"),
                ),
                (
                    "data_lettura",
                    models.DateTimeField(
                        blank=True, null=True, verbose_name="Data lettura"
                    ),
                ),
                (
                    "emessa_da",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name="lettere_emesse",
                        to=settings.AUTH_USER_MODEL,
                        verbose_name="Emessa da",
                    ),
                ),
                (
                    "user",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="lettere_richiamo",
                        to=settings.AUTH_USER_MODEL,
                        verbose_name="User",
                    ),
                ),
            ],
            options={
                "verbose_name": "Lettera di Richiamo",
                "verbose_name_plural": "Lettere di Richiamo",
                "db_table": "users_lettera_richiamo",
                "ordering": ["-data_emissione"],
            },
        ),
        migrations.CreateModel(
            name="RichiestaFerie",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "created_at",
                    models.DateTimeField(
                        auto_now_add=True, verbose_name="Data creazione"
                    ),
                ),
                (
                    "updated_at",
                    models.DateTimeField(auto_now=True, verbose_name="Data modifica"),
                ),
                ("data_inizio", models.DateField(verbose_name="Data inizio")),
                ("data_fine", models.DateField(verbose_name="Data fine")),
                (
                    "giorni_richiesti",
                    models.PositiveIntegerField(verbose_name="Giorni richiesti"),
                ),
                ("motivo", models.TextField(blank=True, verbose_name="Motivo")),
                (
                    "stato",
                    models.CharField(
                        choices=[
                            ("in_attesa", "In Attesa"),
                            ("approvata", "Approvata"),
                            ("rifiutata", "Rifiutata"),
                        ],
                        default="in_attesa",
                        max_length=20,
                        verbose_name="Stato",
                    ),
                ),
                (
                    "gestita_il",
                    models.DateTimeField(
                        blank=True, null=True, verbose_name="Gestita il"
                    ),
                ),
                (
                    "motivazione_rifiuto",
                    models.TextField(blank=True, verbose_name="Motivazione rifiuto"),
                ),
                (
                    "gestita_da",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="ferie_gestite",
                        to=settings.AUTH_USER_MODEL,
                        verbose_name="Gestita da",
                    ),
                ),
                (
                    "user",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="richieste_ferie",
                        to=settings.AUTH_USER_MODEL,
                        verbose_name="User",
                    ),
                ),
            ],
            options={
                "verbose_name": "Richiesta Ferie",
                "verbose_name_plural": "Richieste Ferie",
                "db_table": "users_richiesta_ferie",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="RichiestaPermesso",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "created_at",
                    models.DateTimeField(
                        auto_now_add=True, verbose_name="Data creazione"
                    ),
                ),
                (
                    "updated_at",
                    models.DateTimeField(auto_now=True, verbose_name="Data modifica"),
                ),
                ("data", models.DateField(verbose_name="Data")),
                ("ora_inizio", models.TimeField(verbose_name="Ora inizio")),
                ("ora_fine", models.TimeField(verbose_name="Ora fine")),
                (
                    "ore_richieste",
                    models.DecimalField(
                        decimal_places=2, max_digits=4, verbose_name="Ore richieste"
                    ),
                ),
                ("motivo", models.TextField(verbose_name="Motivo")),
                (
                    "stato",
                    models.CharField(
                        choices=[
                            ("in_attesa", "In Attesa"),
                            ("approvata", "Approvata"),
                            ("rifiutata", "Rifiutata"),
                        ],
                        default="in_attesa",
                        max_length=20,
                        verbose_name="Stato",
                    ),
                ),
                (
                    "gestita_il",
                    models.DateTimeField(
                        blank=True, null=True, verbose_name="Gestita il"
                    ),
                ),
                (
                    "motivazione_rifiuto",
                    models.TextField(blank=True, verbose_name="Motivazione rifiuto"),
                ),
                (
                    "gestita_da",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="permessi_gestiti",
                        to=settings.AUTH_USER_MODEL,
                        verbose_name="Gestita da",
                    ),
                ),
                (
                    "user",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="richieste_permessi",
                        to=settings.AUTH_USER_MODEL,
                        verbose_name="User",
                    ),
                ),
            ],
            options={
                "verbose_name": "Richiesta Permesso",
                "verbose_name_plural": "Richieste Permessi",
                "db_table": "users_richiesta_permesso",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="Timbratura",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "created_at",
                    models.DateTimeField(
                        auto_now_add=True, verbose_name="Data creazione"
                    ),
                ),
                (
                    "updated_at",
                    models.DateTimeField(auto_now=True, verbose_name="Data modifica"),
                ),
                ("data", models.DateField(auto_now_add=True, verbose_name="Data")),
                ("ora", models.TimeField(auto_now_add=True, verbose_name="Ora")),
                (
                    "tipo",
                    models.CharField(
                        choices=[("ingresso", "Ingresso"), ("uscita", "Uscita")],
                        max_length=10,
                        verbose_name="Tipo",
                    ),
                ),
                (
                    "turno",
                    models.CharField(
                        choices=[
                            ("mattina", "Mattina"),
                            ("pomeriggio", "Pomeriggio"),
                            ("notte", "Notte"),
                        ],
                        max_length=15,
                        verbose_name="Turno",
                    ),
                ),
                (
                    "latitudine",
                    models.DecimalField(
                        blank=True, decimal_places=6, max_digits=9, null=True
                    ),
                ),
                (
                    "longitudine",
                    models.DecimalField(
                        blank=True, decimal_places=6, max_digits=9, null=True
                    ),
                ),
                (
                    "note",
                    models.CharField(blank=True, max_length=200, verbose_name="Note"),
                ),
                (
                    "user",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="timbrature",
                        to=settings.AUTH_USER_MODEL,
                        verbose_name="User",
                    ),
                ),
            ],
            options={
                "verbose_name": "Timbratura",
                "verbose_name_plural": "Timbrature",
                "db_table": "users_timbratura",
                "ordering": ["-data", "-ora"],
            },
        ),
        migrations.AddIndex(
            model_name="user",
            index=models.Index(
                fields=["codice_dipendente"], name="users_user_codice__6a302e_idx"
            ),
        ),
        migrations.AddIndex(
            model_name="user",
            index=models.Index(fields=["stato"], name="users_user_stato_309aa9_idx"),
        ),
        migrations.AddIndex(
            model_name="user",
            index=models.Index(
                fields=["data_assunzione"], name="users_user_data_as_84a62f_idx"
            ),
        ),
        migrations.AddIndex(
            model_name="giornatalavorativa",
            index=models.Index(
                fields=["user", "data"], name="users_giorn_user_id_abdfa0_idx"
            ),
        ),
        migrations.AddIndex(
            model_name="giornatalavorativa",
            index=models.Index(fields=["data"], name="users_giorn_data_af012e_idx"),
        ),
        migrations.AddIndex(
            model_name="giornatalavorativa",
            index=models.Index(
                fields=["conclusa"], name="users_giorn_conclus_fad81c_idx"
            ),
        ),
        migrations.AlterUniqueTogether(
            name="giornatalavorativa",
            unique_together={("user", "data")},
        ),
        migrations.AddIndex(
            model_name="letterarichiamo",
            index=models.Index(
                fields=["user", "data_emissione"], name="users_lette_user_id_d5864e_idx"
            ),
        ),
        migrations.AddIndex(
            model_name="letterarichiamo",
            index=models.Index(fields=["tipo"], name="users_lette_tipo_f19f7e_idx"),
        ),
        migrations.AddIndex(
            model_name="richiestaferie",
            index=models.Index(
                fields=["user", "stato"], name="users_richi_user_id_48033c_idx"
            ),
        ),
        migrations.AddIndex(
            model_name="richiestaferie",
            index=models.Index(fields=["stato"], name="users_richi_stato_2bb8ce_idx"),
        ),
        migrations.AddIndex(
            model_name="richiestaferie",
            index=models.Index(
                fields=["data_inizio"], name="users_richi_data_in_3a65c4_idx"
            ),
        ),
        migrations.AddIndex(
            model_name="richiestapermesso",
            index=models.Index(
                fields=["user", "stato"], name="users_richi_user_id_e74f40_idx"
            ),
        ),
        migrations.AddIndex(
            model_name="richiestapermesso",
            index=models.Index(fields=["stato"], name="users_richi_stato_ca7b91_idx"),
        ),
        migrations.AddIndex(
            model_name="richiestapermesso",
            index=models.Index(fields=["data"], name="users_richi_data_ee58df_idx"),
        ),
        migrations.AddIndex(
            model_name="timbratura",
            index=models.Index(
                fields=["user", "data"], name="users_timbr_user_id_a3baa5_idx"
            ),
        ),
        migrations.AddIndex(
            model_name="timbratura",
            index=models.Index(fields=["data"], name="users_timbr_data_3641a2_idx"),
        ),
        migrations.AlterUniqueTogether(
            name="timbratura",
            unique_together={("user", "data", "tipo", "turno")},
        ),
    ]
