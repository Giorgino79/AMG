{% comment %}
Componente Alerts con Django Messages

Uso:
    {% include 'components/alerts.html' %}

Mostra automaticamente tutti i messaggi Django (success, error, warning, info)
Usa Bootstrap 5 alerts con auto-dismiss dopo 5 secondi
{% endcomment %}

{% if messages %}
<div class="alert-container">
    {% for message in messages %}
    <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
        {% if message.level == DEFAULT_MESSAGE_LEVELS.SUCCESS %}
        <i class="bi bi-check-circle-fill me-2"></i>
        {% elif message.level == DEFAULT_MESSAGE_LEVELS.ERROR %}
        <i class="bi bi-x-circle-fill me-2"></i>
        {% elif message.level == DEFAULT_MESSAGE_LEVELS.WARNING %}
        <i class="bi bi-exclamation-triangle-fill me-2"></i>
        {% elif message.level == DEFAULT_MESSAGE_LEVELS.INFO %}
        <i class="bi bi-info-circle-fill me-2"></i>
        {% endif %}
        {{ message }}
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
    {% endfor %}
</div>

<script>
// Auto-dismiss alerts dopo 5 secondi
document.addEventListener('DOMContentLoaded', function() {
    const alerts = document.querySelectorAll('.alert:not(.alert-permanent)');
    alerts.forEach(alert => {
        setTimeout(() => {
            const bsAlert = new bootstrap.Alert(alert);
            bsAlert.close();
        }, 5000);
    });
});
</script>
{% endif %}
